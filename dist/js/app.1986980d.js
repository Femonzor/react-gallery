webpackJsonp([1],{101:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),u=r(s),f=n(28),l=n(231),p=r(l),d=n(99),m=r(d),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch;e.imgsArrangeArr.length||t(m.default.fetchImages())}},{key:"render",value:function(){return u.default.createElement(p.default,this.props)}}]),t}(s.Component),g=function(e){return{imgsArrangeArr:e.images.get("imgsArrangeArr")}};t.default=(0,f.connect)(g)(h)},102:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(26),i=n(61),a=r(i),c=n(236),s=r(c),u=(0,o.createStore)(s.default,(0,o.applyMiddleware)(a.default));t.default=u},103:function(e,t){},229:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n(103);var o=n(9),i=r(o),a=n(27),c=(r(a),n(28)),s=n(102),u=r(s),f=n(101),l=r(f);(0,a.render)(i.default.createElement(c.Provider,{store:u.default},i.default.createElement(l.default,null)),document.querySelector("#app"))},230:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),u=r(s),f=n(29),l=r(f),p=n(36),d=r(p);n(237);var m=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleClick=e.handleClick.bind(e),e}return a(t,e),c(t,[{key:"handleClick",value:function(e){this.props.data.get("isCenter")?this.props.inverse():this.props.center(),e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){var e=this.props.data,t=e.get("isInverse"),n=e.get("isCenter"),r=(0,d.default)({"controller-unit":!0,"is-center":n,"is-inverse":t});return u.default.createElement("span",{className:r,onClick:this.handleClick})}}]),t}(s.Component);m.propTypes={data:l.default.object,inverse:l.default.func,center:l.default.func},t.default=m},231:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(238);var u=n(9),f=r(u),l=n(27),p=r(l),d=n(232),m=r(d),h=n(230),g=r(h),v=n(99),y=r(v),b=(n(21),function(e,t){return Math.ceil(Math.random()*(t-e)+e)}),_=function(){return(Math.random()>.5?"":"-")+Math.ceil(30*Math.random())},j=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.constant={centerPos:{left:0,right:0},hPosRange:{leftSecX:[0,0],rightSecX:[0,0],y:[0,0]},vPosRange:{x:[0,0],topY:[0,0]}},e.rearrange=e.rearrange.bind(e),e.center=e.center.bind(e),e.updateConstant=e.updateConstant.bind(e),e.init=e.init.bind(e),e}return a(t,e),s(t,[{key:"init",value:function(){var e=this.props.imgsArrangeArr,t=!0;e.forEach(function(e){e.get("isCenter")&&(t=!1)}),t&&e.size&&this.updateConstant()}},{key:"inverse",value:function(e){var t=this;return function(){var n=t.props,r=n.dispatch,o=n.imgsArrangeArr;r(y.default.flipImage(e,!o.getIn([e,"isInverse"])))}}},{key:"center",value:function(e){var t=this;return function(){t.rearrange(e)}}},{key:"rearrange",value:function(e){var t=this.constant,n=this.props,r=n.dispatch,o=t.centerPos,i=t.hPosRange,a=t.vPosRange,s=i.leftSecX,u=i.rightSecX,f=i.y,l=a.topY,p=a.x,d=Math.floor(2*Math.random()),m=this.props.imgsArrangeArr.toJS(),h=[],g=0,v=void 0,j=void 0,P=void 0,O=void 0,M=void 0;for(v=m.splice(e,1),v[0]=c({},v[0],{pos:o,rotate:0,isCenter:!0}),g=Math.ceil(Math.random()*(m.length-d)),h=m.splice(g,d),h.forEach(function(e,t){h[t]=c({},h[t],{pos:{top:b(l[0],l[0]),left:b(p[0],p[0])},rotate:_(),isCenter:!1})}),j=0,P=m.length,O=P/2;j<P;j++)M=j<O?s:u,m[j]=c({},m[j],{pos:{top:b(f[0],f[1]),left:b(M[0],M[1])},rotate:_(),isCenter:!1});h&&h[0]&&m.splice(g,0,h[0]),m.splice(e,0,v[0]),r(y.default.setImages(m))}},{key:"updateConstant",value:function(){var e=p.default.findDOMNode(this.refs.stage),t=e.scrollWidth,n=e.scrollHeight,r=Math.ceil(t/2),o=Math.ceil(n/2),i=p.default.findDOMNode(this.refs.imgFigure0),a=i.scrollWidth,c=i.scrollHeight,s=Math.ceil(a/2),u=Math.ceil(c/2);this.constant.centerPos={left:r-s,top:o-u},this.constant.hPosRange.leftSecX=[-s,r-3*s],this.constant.hPosRange.rightSecX=[r+s,t-s],this.constant.hPosRange.y=[-u,n-u],this.constant.vPosRange.topY=[-u,o-3*u],this.constant.vPosRange.x=[r-a,r],this.rearrange(0)}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"render",value:function(){var e=this,t=this.props.imgsArrangeArr;return f.default.createElement("section",{className:"stage",ref:"stage"},f.default.createElement("section",{className:"img-sec"},t.map(function(t,n){return f.default.createElement(m.default,{key:t.getIn(["info","id"]),data:t,ref:"imgFigure"+n,inverse:e.inverse(n),center:e.center(n)})})),f.default.createElement("nav",{className:"controller-nav"},t.map(function(t,n){return f.default.createElement(g.default,{key:t.getIn(["info","id"]),data:t,inverse:e.inverse(n),center:e.center(n)})})))}}]),t}(u.Component);t.default=j},232:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),u=r(s),f=n(29),l=r(f),p=n(36),d=r(p),m=n(21);n(239);var h=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleClick=e.handleClick.bind(e),e}return a(t,e),c(t,[{key:"handleClick",value:function(e){this.props.data.get("isCenter")?this.props.inverse():this.props.center(),e.stopPropagation(),e.preventDefault()}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,m.is)(this.props.data,e.data)}},{key:"render",value:function(){var e=this.props.data,t=e.get("info"),n=e.get("pos"),r=e.get("rotate"),o=e.get("isInverse"),i=e.get("isCenter"),a=t.get("imageUrl"),c=t.get("title"),s=t.get("desc"),f=(0,d.default)({"img-figure":!0,"is-inverse":o}),l={};return n&&(l.left=n.get("left"),l.top=n.get("top")),r&&["Moz","ms","Webkit",""].forEach(function(e){l[e?e+"Transform":"transform"]="rotate("+r+"deg)"}),i&&(l.zIndex=11),u.default.createElement("figure",{className:f,style:l,onClick:this.handleClick},u.default.createElement("img",{src:a,alt:c}),u.default.createElement("figcaption",{className:"fig-caption"},u.default.createElement("h2",{className:"img-title"},c),u.default.createElement("div",{className:"img-back"},u.default.createElement("p",null,s))))}}]),t}(s.Component);h.propTypes={data:l.default.object,inverse:l.default.func,center:l.default.func},t.default=h},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={resourcePrefix:"https://femonzor.github.io/resource/react-gallery"};t.default=r},234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(21),a=(0,i.fromJS)({pos:{left:0,top:0},rotate:0,isInverse:!1,isCenter:!1}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case o.IMAGE_FLIP:return e=e.set("isInverse",t.payload.isInverse);default:return e}};t.default=c},235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(234),a=function(e){return e&&e.__esModule?e:{default:e}}(i),c=n(21),s=(0,c.fromJS)({imgsArrangeArr:[]}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case o.IMAGES_UPDATE:return e=e.set("imgsArrangeArr",(0,c.fromJS)(t.payload.imgsArrangeArr));case o.IMAGE_FLIP:return e=e.setIn(["imgsArrangeArr",t.payload.idx],(0,a.default)(e.getIn(["imgsArrangeArr",t.payload.idx]),t));default:return e}};t.default=u},236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),o=n(235),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,r.combineReducers)({images:i.default});t.default=a},237:function(e,t){},238:function(e,t){},239:function(e,t){},240:function(e,t){e.exports=[{info:{id:1,fileName:"1.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:2,fileName:"2.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:3,fileName:"3.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:4,fileName:"4.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:5,fileName:"5.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:6,fileName:"6.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:7,fileName:"7.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:8,fileName:"8.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:9,fileName:"9.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:10,fileName:"10.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:11,fileName:"11.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:12,fileName:"12.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:13,fileName:"13.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:14,fileName:"14.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:15,fileName:"15.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}},{info:{id:16,fileName:"16.jpg",title:"Heaven of time",desc:"Here he comes Here comes Speed Racer."}}]},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGES_UPDATE="IMAGES_UPDATE",t.IMAGE_FLIP="IMAGE_FLIP"},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(233),a=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(){return function(e){var t=n(240);t.forEach(function(e){e.info.imageUrl=a.default.resourcePrefix+"/"+e.info.fileName,e.pos={top:0,left:0},e.rotate=0,e.isCenter=!1,e.isInverse=!1}),e(s(t))}},s=function(e){return{type:o.IMAGES_UPDATE,payload:{imgsArrangeArr:e}}},u=function(e,t){return{type:o.IMAGE_FLIP,payload:{idx:e,isInverse:t}}};t.default={fetchImages:c,setImages:s,flipImage:u}}},[229]);